[h: callerID=json.get(macro.args,0)]
[h: impersonate(callerID)]
[h: armorJ = getProperty("Armor",callerID)]

[h: htmlContent = ""]
[h: htmlContent = htmlContent + "<div class='section'><div class=heading><h3>Weapons</h3></div><table class='scrollable'>"]
[h: row_class = "black"]
[h: args = json.append("[]", callerID)]
[h: addSectionLink = macroLink("Add", "add_charweapon@lib:Traveller", "none",args)]
[h: htmlContent = htmlContent + "<tr class='tblhead'><th>Type</th><th>TL</th><th>KD</th><th>ED</th><th>RD</th><th>EX</th><th>CR</th><th>CL</th><th>HT</th><th>Skill</th></tr>"]
[h, foreach(armorType, armorJ), code: {
  [h: armorInfo = json.get(armorJ, armorType)]
  [h: TL = json.get(armorInfo, 0)]
  [h: KD = json.get(armorInfo, 1)]
  [h: ED = json.get(armorInfo, 2)]
  [h: RD = json.get(armorInfo, 3)]
  [h: EX = json.get(armorInfo, 4)]
  [h: CR = json.get(armorInfo, 5)]
  [h: CL = json.get(armorInfo, 6)]
  [h: HT = json.get(armorInfo, 7)]
  [h: Skill = json.get(armorInfo, 8)]
  [h: Descr = json.get(armorInfo, 9)]
  [h: KG = json.get(armorInfo, 10)]
  [h: Cost = json.get(armorInfo, 11)]
  [h: doc="Type{TL-0,KD-1,ED-2,RD-3,EX-4,COR-5,CLD-6,HET-7,Skill-8,Desc-9,KG-10,Cst-11}"]
  [h: htmlContent = htmlContent + "<tr class='" + row_class + "'><td>" + armorType + "</td><td>" + TL + "</td><td>" + KD + "</td><td>" + ED + "</td><td>" + RD + "</td><td>" + EX + "</td><td>" + CR + "</td><td>" + CL + "</td><td>" + HT + "</td><td>" + Skill + "</td></tr>"]
  [h: row_class = if(row_class == "black", "white", "black")] 
}]
[h: htmlContent = htmlContent + "</table><div class='edit'>" + addSectionLink + "</div></div>"]
<!-- Additional tabs -->

[h: macro.return = htmlContent] 
